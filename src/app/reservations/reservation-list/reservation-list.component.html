<app-header [text]="'your reservations'"></app-header>
<app-container>
  <form style="width: 100%; padding-top: 2em" action="" method="get" fxLayout="row" fxLayoutAlign="center start" fxLayoutGap="1em">
    <mat-form-field appearance="outline">
      <mat-label>Property name</mat-label>
      <input matInput name="propertyName" type="text">
      <mat-icon matSuffix>apartment</mat-icon>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Date range</mat-label>
      <mat-date-range-input [rangePicker]="picker">
        <input matStartDate name="startDate" placeholder="Start date">
        <input matEndDate name="endDate" placeholder="End date">
      </mat-date-range-input>
      <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-date-range-picker #picker></mat-date-range-picker>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Status</mat-label>
      <mat-select>
        <mat-option>--</mat-option>
        @for (status of Object.values(ReservationStatus); track status) {
          <mat-option [value]="status">{{status}}</mat-option>
        }
      </mat-select>
    </mat-form-field>
    <button mat-fab color="primary" type="submit">
      <mat-icon>search</mat-icon>
    </button>
  </form>
  <div class="grid">
    <mat-card class="card" *ngFor="let reservation of reservations">
      <img mat-card-image class="image" [src]="images.get(reservation.property.id) ?? placeholderImage" alt="Image of a property."/>
      <mat-card-header class="header">
        <div class="reviewer-and-time">
          <div class="reviewer-name-and-time">
            <p class="review-time"></p>
          </div>
        </div>
        <mat-card-subtitle class="subtitle"></mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <h2 routerLink="/properties/{{ reservation.property.id }}">{{ reservation.property.name }}</h2>
        <p class="date-range"><mat-icon>event</mat-icon> {{ formatDate(reservation.startDate) }} - {{ formatDate(reservation.endDate) }}</p>
        <p class="date-range"><mat-icon>group</mat-icon> {{ reservation.numberOfGuests }}</p>
        <p class="price">{{ reservation.price }}$</p>
      </mat-card-content>
        <mat-card-footer class="footer">
          <div class="button-container">
            <button mat-flat-button class="approve-button button" color="primary" (click)="cancelReservation(reservation)">Cancel</button>
          </div>
      </mat-card-footer>
    </mat-card>
  </div>
</app-container>

